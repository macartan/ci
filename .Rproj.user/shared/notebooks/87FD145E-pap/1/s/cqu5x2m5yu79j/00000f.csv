"0",""
"0","design <- "
"0","  declare_model("
"0","    municipality = add_level(N = n_muni),"
"0","    subjects = add_level(N = n,"
"0","                         female = simple_ra(N, prob = f_prop))) + "
"0","  declare_model(municipality = as.numeric(municipality)) +"
"0","  declare_model(handler = add_division) +"
"0","  declare_model(handler = block_assign) +"
"0","  declare_model(cluster = paste(municipality, WG)) +"
"0","  declare_measurement(shock = draw_normal_icc(clusters = cluster, ICC = icc)) +"
"0","  declare_measurement(handler = demean_vars) +"
"0","  declare_measurement(Y = b*treated + het_f*female*treated + het_m*minority*treated + shock) +"
"0","  declare_inquiry(ATE = b,"
"0","                  het_female = het_f,"
"0","                  het_minority = het_m) +"
"0","  declare_estimator(Y ~ treated*female + treated*minority|municipality,"
"0","                    term = c(""treated"", "
"0","                             ""treated:female"","
"0","                             ""treated:minority""),"
"0","                    #weights = ~ipw,"
"0","                    inquiry = c(""ATE"", ""het_female"", ""het_minority""),"
"0","                    cluster = ~ cluster, "
"0","                    .method = fixest::feols,"
"0","                    .summary = function(x) broom::tidy(x, conf.int = TRUE))"
"0",""
