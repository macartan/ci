---
title: "Group 4: Exercise 2-4"
subtitle: "Course: Causal Inference and Experimental Design"
date: 2024-01-16
author:
  - name: Philipp Heyna
    email: philipp.heyna@hu-berlin.de
  - name: Nader Hotait
    email: nader.hotait@hu-berlin.de
  - name: Daniel Kuhlen
    email: kuhlenda@hu-berlin.de
  - name: Robert Stelzle
    email: robert.martin.stelzle@student.hu-berlin.de
  - name: Yoanna Yankova
    email: yankovay@hu-berlin.de
format: html
---

```{r}
#| include: false
pacman::p_load(
  knitr,
  tidyverse,
  CausalQueries,
  DeclareDesign
)
```


## Q 2.4

::: {.callout-note icon=false collapse="true"}

### Task

**Confounded**
Declare a design in which:

* The assignment of a  treatment $X$ depends in part on upon some other, binary, variable $W$: in particular  $\Pr(X=1|W=0) = .2$ and $\Pr(X=1|W=1) = .5$)
* The outcome $Y$ depends on both $X$ and $W$: in particular $Y = X*W + u$ where $u$ is a random shock.
* Diagnose a design with three approaches to estimating the effect of $X$ on $Y$: (a) ignoring $W$ (b) adding $W$ as a linear control (c) including both $W$  and an interaction between $W$ and $X$. 

Discuss results. Do any of these return the right answer?

**Hint:** You can add three separate `declare_estimator` steps. They should have distinct labels. The trickiest part is to figure out how to extract the estimate in (c) because you will have both a main term and an interaction term for $X$.

:::


### Solution

## Q 3.4

::: {.callout-note icon=false collapse="true"}

### Task
* A set of units have outcome $Y^1_i$ at baseline.
* At endline they have potential outcomes $Y^2_i(0)$ and  $Y^2_i(1)$


1. Write down the estimand for the average effect of treatment on endline outcomes
2. Write down the estimand for the average effect of treatment on the change from baseline to endline for all units

Compare these and discuss.

:::

### Solution

## Q 4.4

::: {.callout-note icon=false collapse="true"}

### Task
Imagine a model that looks like this:

```{r, echo = FALSE, fig.height = 3, fig.width = 10}
make_model("X -> M -> Y <-> X") |> plot(x_coord = 1:3, y_coord = c(1,1,1))
```

* Say that in truth  ATE of  $X$ on $M$ is .9 and that the ATE of  $M$ on $Y$ is .9. Is the implied effect of 0.81 on $X$ on $Y$ identified?   
* Say that in truth  ATE of  $X$ on $M$ is 1 and that the ATE of  $M$ on $Y$ is 1. Is the implied effect of 1 on $X$ on $Y$ identified?   
* Discuss 

**Hint**: This question is asking about the front door criterion. Check whether the conditions apply for the front door criterion on hold. Note that an effect is *not* identified if the data pattern it produces is also consistent with a different effect. Is that the case here? Note you can generate and update models of this form with `CausalQueries`.
:::

### Solution


