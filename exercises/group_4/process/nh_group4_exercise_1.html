<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Philipp Heyna">
<meta name="author" content="Nader Hotait">
<meta name="author" content="Daniel Kuhlen">
<meta name="author" content="Robert Stelzle">
<meta name="author" content="Yoanna Yankova">
<meta name="dcterms.date" content="2024-01-16">

<title>Group 4: Exercise 2-4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="nh_group4_exercise_1_files/libs/clipboard/clipboard.min.js"></script>
<script src="nh_group4_exercise_1_files/libs/quarto-html/quarto.js"></script>
<script src="nh_group4_exercise_1_files/libs/quarto-html/popper.min.js"></script>
<script src="nh_group4_exercise_1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="nh_group4_exercise_1_files/libs/quarto-html/anchor.min.js"></script>
<link href="nh_group4_exercise_1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="nh_group4_exercise_1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="nh_group4_exercise_1_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="nh_group4_exercise_1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="nh_group4_exercise_1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="nh_group4_exercise_1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="nh_group4_exercise_1_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#q-2.4" id="toc-q-2.4" class="nav-link active" data-scroll-target="#q-2.4">Q 2.4</a>
  <ul class="collapse">
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code">Code</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul></li>
  <li><a href="#q-3.4" id="toc-q-3.4" class="nav-link" data-scroll-target="#q-3.4">Q 3.4</a>
  <ul class="collapse">
  <li><a href="#discussion-1" id="toc-discussion-1" class="nav-link" data-scroll-target="#discussion-1">Discussion</a></li>
  </ul></li>
  <li><a href="#q-4.4" id="toc-q-4.4" class="nav-link" data-scroll-target="#q-4.4">Q 4.4</a>
  <ul class="collapse">
  <li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution">Solution</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Group 4: Exercise 2-4</h1>
<p class="subtitle lead">Course: Causal Inference and Experimental Design</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Philipp Heyna </p>
             <p>Nader Hotait </p>
             <p>Daniel Kuhlen </p>
             <p>Robert Stelzle </p>
             <p>Yoanna Yankova </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 16, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="q-2.4" class="level2">
<h2 class="anchored" data-anchor-id="q-2.4">Q 2.4</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Confounded</strong></p>
<p>Declare a design in which:</p>
<ul>
<li>The assignment of a treatment <span class="math inline">\(X\)</span> depends in part on upon some other, binary, variable <span class="math inline">\(W\)</span>: in particular <span class="math inline">\(\Pr(X=1|W=0) = .2\)</span> and <span class="math inline">\(\Pr(X=1|W=1) = .5\)</span>)</li>
<li>The outcome <span class="math inline">\(Y\)</span> depends on both <span class="math inline">\(X\)</span> and <span class="math inline">\(W\)</span>: in particular <span class="math inline">\(Y = X*W + u\)</span> where <span class="math inline">\(u\)</span> is a random shock.</li>
<li>Diagnose a design with three approaches to estimating the effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>: (a) ignoring <span class="math inline">\(W\)</span> (b) adding <span class="math inline">\(W\)</span> as a linear control (c) including both <span class="math inline">\(W\)</span> and an interaction between <span class="math inline">\(W\)</span> and <span class="math inline">\(X\)</span>.</li>
</ul>
<p>Discuss results. Do any of these return the right answer?</p>
<p><strong>Hint:</strong> You can add three separate <code>declare_estimator</code> steps. They should have distinct labels. The trickiest part is to figure out how to extract the estimate in (c) because you will have both a main term and an interaction term for <span class="math inline">\(X\)</span>.</p>
</div>
</div>
</div>
<section id="code" class="level3">
<h3 class="anchored" data-anchor-id="code">Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>declaration <span class="ot">&lt;-</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_model</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="dv">1000</span>, <span class="co"># Arbitrary population of 1000</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">U =</span> <span class="fu">rnorm</span>(N), <span class="co"># Assuming error term is random</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">W =</span> <span class="fu">rbinom</span>(N, <span class="dv">1</span>, <span class="fl">0.5</span>), <span class="sc">+</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">potential_outcomes</span>(Y <span class="sc">~</span> Z <span class="sc">*</span> W <span class="sc">+</span> U)) <span class="sc">+</span> <span class="co"># Potential Outcomes as defined in task</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_inquiry</span>(<span class="at">ATE =</span> (<span class="fu">mean</span>(Y_Z_1 <span class="sc">-</span> Y_Z_0))) <span class="sc">+</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_assignment</span>(<span class="at">Z =</span> <span class="fu">rbinom</span>(N, <span class="dv">1</span>, <span class="at">prob =</span> <span class="fu">ifelse</span>(W <span class="sc">==</span> <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>))) <span class="sc">+</span> <span class="co"># Assignment conditional on W </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_measurement</span>(<span class="at">Y =</span> <span class="fu">reveal_outcomes</span>(Y <span class="sc">~</span> Z)) <span class="sc">+</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_estimator</span>(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    Y <span class="sc">~</span> Z, <span class="at">term =</span> <span class="st">"Z"</span>, <span class="at">inquiry =</span> <span class="st">"ATE"</span>, <span class="at">label =</span> <span class="st">"Ignore W"</span>) <span class="sc">+</span>  <span class="co"># Ignoring W</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_estimator</span>(</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    Y <span class="sc">~</span> Z <span class="sc">+</span> W, <span class="at">term =</span> <span class="st">"Z"</span>, <span class="at">inquiry =</span> <span class="st">"ATE"</span>,<span class="at">label =</span> <span class="st">"Control for W"</span>) <span class="sc">+</span> <span class="co"># Controlling for W</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">declare_estimator</span>(</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    Y <span class="sc">~</span> Z <span class="sc">+</span> Z <span class="sc">*</span> W <span class="sc">+</span> W, <span class="at">term =</span> <span class="st">"Z"</span>, <span class="at">inquiry =</span> <span class="st">"ATE"</span>,<span class="at">label =</span> <span class="st">"Interaction"</span>) <span class="co"># Interaction</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>model_diagnosis <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">diagnose_design</span>(declaration,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sims =</span> <span class="dv">500</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bootstrap_sims =</span> <span class="dv">100</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">reshape_diagnosis</span>(model_diagnosis) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 11%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Design</th>
<th style="text-align: left;">Inquiry</th>
<th style="text-align: left;">Estimator</th>
<th style="text-align: left;">Outcome</th>
<th style="text-align: left;">Term</th>
<th style="text-align: left;">N Sims</th>
<th style="text-align: left;">Mean Estimand</th>
<th style="text-align: left;">Mean Estimate</th>
<th style="text-align: left;">Bias</th>
<th style="text-align: left;">SD Estimate</th>
<th style="text-align: left;">RMSE</th>
<th style="text-align: left;">Power</th>
<th style="text-align: left;">Coverage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">declaration</td>
<td style="text-align: left;">ATE</td>
<td style="text-align: left;">Control for W</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Z</td>
<td style="text-align: left;">500</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.61</td>
<td style="text-align: left;">0.11</td>
<td style="text-align: left;">0.07</td>
<td style="text-align: left;">0.13</td>
<td style="text-align: left;">1.00</td>
<td style="text-align: left;">0.68</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.02)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">declaration</td>
<td style="text-align: left;">ATE</td>
<td style="text-align: left;">Ignore W</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Z</td>
<td style="text-align: left;">500</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">0.71</td>
<td style="text-align: left;">0.21</td>
<td style="text-align: left;">0.07</td>
<td style="text-align: left;">0.22</td>
<td style="text-align: left;">1.00</td>
<td style="text-align: left;">0.12</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.02)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">declaration</td>
<td style="text-align: left;">ATE</td>
<td style="text-align: left;">Interaction</td>
<td style="text-align: left;">Y</td>
<td style="text-align: left;">Z</td>
<td style="text-align: left;">500</td>
<td style="text-align: left;">0.50</td>
<td style="text-align: left;">-0.00</td>
<td style="text-align: left;">-0.50</td>
<td style="text-align: left;">0.11</td>
<td style="text-align: left;">0.52</td>
<td style="text-align: left;">0.04</td>
<td style="text-align: left;">0.00</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.00)</td>
<td style="text-align: left;">(0.01)</td>
<td style="text-align: left;">(0.00)</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="discussion" class="level3">
<h3 class="anchored" data-anchor-id="discussion">Discussion</h3>
<p>The role of <span class="math inline">\(W\)</span> is defined as a confounder since it serves as a parent variable influencing both the treatment assignment <span class="math inline">\(X\)</span> and the treatment outcome <span class="math inline">\(Y\)</span> (see <a href="#fig-confounding-dag">Figure&nbsp;1</a>). Failing to adjust for this confounder in the model can lead to biased estimations. Such a bias is conventionally referred to as “common cause confounding bias” or, in other words, a violation of the backdoor criterion. Therefore, it is crucial to incorporate <span class="math inline">\(W\)</span> into the model. Utilizing simulations through <code>DeclareDesign</code>, we gain insights into this specific phenomenon. From the simulation results, it is evident that the model which accounts for <span class="math inline">\(W\)</span> (<em>“Control for W”</em>) produces mean estimates that are considerably closer and less biased compared to the estimand than the model that neglects <span class="math inline">\(W\)</span> (<em>“Ignore W”</em>). Furthermore, both the coverage and RMSE metrics suggest that the estimates from the model accounting for the confounder are less erroneous compared to those from the model that disregards it.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-confounding-dag" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="nh_group4_exercise_1_files/figure-html/fig-confounding-dag-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption class="figure-caption">Figure&nbsp;1: <span class="math inline">\(W\)</span> as a common cause confounder of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="q-3.4" class="level2">
<h2 class="anchored" data-anchor-id="q-3.4">Q 3.4</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>A set of units have outcome <span class="math inline">\(Y^1_i\)</span> at baseline.</li>
<li>At endline they have potential outcomes <span class="math inline">\(Y^2_i(0)\)</span> and <span class="math inline">\(Y^2_i(1)\)</span></li>
</ul>
<ol type="1">
<li>Write down the estimand for the average effect of treatment on endline outcomes</li>
<li>Write down the estimand for the average effect of treatment on the change from baseline to endline for all units</li>
</ol>
<p>Compare these and discuss.</p>
</div>
</div>
</div>
<section id="discussion-1" class="level3">
<h3 class="anchored" data-anchor-id="discussion-1">Discussion</h3>
<p>Assuming following:</p>
<ol type="1">
<li><span class="math inline">\(\text{ATE}_{\text{endline}} = \frac{1}{N} \sum_{i=1}^{N} \left( Y^2_i(1) - Y^2_i(0) \right)\)</span></li>
<li><span class="math inline">\(\text{ATE}_{\text{change}} = \frac{1}{N} \sum_{i=1}^{N} \left( \left( Y^2_i(1) - Y^1_i \right) - \left( Y^2_i(0) - Y^1_i \right) \right)\)</span></li>
</ol>
<p>One can conclude that <span class="math inline">\(\text{ATE}_{\text{endline}}\)</span> approximates an estimator, which informs us about the average size of the treatment effect on a binary outcome. However, <span class="math inline">\(\text{ATE}_{\text{change}}\)</span> provides insight into the treatment effect as a comparison between conditions before and after treatment, indicating the effectiveness of the treatment relative to not being treated. Hence, the first scenario informs us about the strength of the treatment given the prevalence of positive outcomes, while the second scenario reveals the effectiveness of the treatment by considering the initial conditions of the treated units.</p>
<p>Assuming that <span class="math inline">\(ATE = ATT\)</span> and considering <span class="math inline">\(Y^{t=1}_i\)</span>$ and $<span class="math inline">\(Y^{t=2}_i\)</span> in this scenario, one could describe <span class="math inline">\(\text{ATE}_{\text{endline}}\)</span> as a between-estimator of treated units, and <span class="math inline">\(\text{ATE}_{\text{change}}\)</span> as an in-between estimation of treated units before and after treatment, effectively combining between- and within-unit estimations.</p>
</section>
</section>
<section id="q-4.4" class="level2">
<h2 class="anchored" data-anchor-id="q-4.4">Q 4.4</h2>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Imagine a model that looks like this:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="nh_group4_exercise_1_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li>Say that in truth ATE of <span class="math inline">\(X\)</span> on <span class="math inline">\(M\)</span> is .9 and that the ATE of <span class="math inline">\(M\)</span> on <span class="math inline">\(Y\)</span> is .9. Is the implied effect of 0.81 on <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> identified?<br>
</li>
<li>Say that in truth ATE of <span class="math inline">\(X\)</span> on <span class="math inline">\(M\)</span> is 1 and that the ATE of <span class="math inline">\(M\)</span> on <span class="math inline">\(Y\)</span> is 1. Is the implied effect of 1 on <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> identified?<br>
</li>
<li>Discuss</li>
</ul>
<p><strong>Hint</strong>: This question is asking about the front door criterion. Check whether the conditions apply for the front door criterion on hold. Note that an effect is <em>not</em> identified if the data pattern it produces is also consistent with a different effect. Is that the case here? Note you can generate and update models of this form with <code>CausalQueries</code>.</p>
</div>
</div>
</div>
<section id="solution" class="level3">
<h3 class="anchored" data-anchor-id="solution">Solution</h3>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>